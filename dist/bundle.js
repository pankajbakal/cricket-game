(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n(r.key),r)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var i=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(n=[{key:"createBatsmanSprite",value:function(){return this.createSprite(50,100,(function(t){var e=t.createLinearGradient(20,20,30,80);e.addColorStop(0,"#444"),e.addColorStop(1,"#000"),t.fillStyle=e,t.shadowColor="rgba(0,0,0,0.5)",t.shadowBlur=5,t.shadowOffsetX=2,t.fillRect(20,20,10,60),t.fillRect(10,40,30,20);var n=t.createLinearGradient(30,30,50,35);n.addColorStop(0,"#8B4513"),n.addColorStop(1,"#A0522D"),t.fillStyle=n,t.fillRect(30,30,20,5)}))}},{key:"createBowlerSprite",value:function(){return this.createSprite(50,100,(function(t){var e=t.createLinearGradient(20,20,30,80);e.addColorStop(0,"#444"),e.addColorStop(1,"#000"),t.fillStyle=e,t.shadowColor="rgba(0,0,0,0.5)",t.shadowBlur=5,t.fillRect(20,20,10,60),t.beginPath(),t.moveTo(30,40),t.quadraticCurveTo(40,50,35,60),t.stroke()}))}},{key:"createBallSprite",value:function(){return this.createSprite(30,30,(function(t){var e=t.createRadialGradient(15,15,0,15,15,12);e.addColorStop(0,"#ffffff"),e.addColorStop(.6,"#ff0000"),e.addColorStop(1,"#cc0000"),t.fillStyle=e,t.shadowColor="rgba(0,0,0,0.5)",t.shadowBlur=5,t.shadowOffsetX=2,t.shadowOffsetY=2,t.beginPath(),t.arc(15,15,12,0,2*Math.PI),t.fill(),t.strokeStyle="#ffffff",t.lineWidth=2,t.beginPath(),t.arc(15,15,8,0,Math.PI,!0),t.stroke()}))}},{key:"createWicketsSprite",value:function(){return this.createSprite(30,150,(function(t){t.fillStyle="#8B4513",t.fillRect(0,0,5,150),t.fillRect(12,0,5,150),t.fillRect(24,0,5,150)}))}},{key:"createSprite",value:function(t,e,n){var i=document.createElement("canvas");i.width=t,i.height=e,n(i.getContext("2d"));var r=new Image;return r.src=i.toDataURL(),r}}])&&e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,a(i.key),i)}}function a(t){var e=function(t){if("object"!=r(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:e+""}var s=function(){return t=function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.width=i,this.height=r},(e=[{key:"draw",value:function(t,e){t.drawImage(e,this.x,this.y,this.width,this.height)}},{key:"collidesWith",value:function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}},{key:"scale",value:function(t,e){this.x*=t,this.y*=e,this.width*=t,this.height*=e}}])&&o(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,u(i.key),i)}}function u(t){var e=function(t){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}function h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(h=function(){return!!t})()}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},f.apply(null,arguments)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}var b=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e,n){return e=y(e),function(t,e){if(e&&("object"==c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,h()?Reflect.construct(e,n||[],y(t).constructor):e.apply(t,n))}(this,e,[100,280,50,100])).speed=5,i.currentShot=null,i.shotAngle=0,i.animationFrame=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(e,t),n=e,i=[{key:"move",value:function(t,e){var n=this.y+t*this.speed;n>=230&&n<=280&&(this.y=n)}},{key:"playShot",value:function(t){var e;return e=t>80?"hook":t>60?"pull":t>40?"cover":"straight",this.currentShot=e,this.shotAngle=this.getShotAngle(e),this.animationFrame=10,console.log("Playing ".concat(e," shot with power: ").concat(t)),e}},{key:"getShotAngle",value:function(t){return{straight:Math.PI/2,cover:Math.PI/3,pull:2*Math.PI/3,hook:3*Math.PI/4}[t]||Math.PI/2}},{key:"draw",value:function(t,n){var i,r,o;t.save(),this.animationFrame>0&&(t.translate(this.x+this.width/2,this.y+this.height/2),t.rotate(this.shotAngle*(this.animationFrame/10)),t.translate(-(this.x+this.width/2),-(this.y+this.height/2)),this.animationFrame--),(i=e,r=this,"function"==typeof(o=f(y(1&3?i.prototype:i),"draw",r))?function(t){return o.apply(r,t)}:o)([t,n]),t.restore()}}],i&&l(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}(s);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,S(i.key),i)}}function g(t,e,n){return(e=S(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t){var e=function(t){if("object"!=m(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:e+""}var P=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"updateScreenDimensions",value:function(t,e){this.screenWidth=t,this.screenHeight=e,this.PITCH_LENGTH=.75*t,this.PITCH_START=.1875*t,this.BallTypes={YORKER:d(d({},this.BallTypes.YORKER),{},{bouncePoint:.6875*t}),BOUNCER:d(d({},this.BallTypes.BOUNCER),{},{bouncePoint:.3125*t}),NORMAL:d(d({},this.BallTypes.NORMAL),{},{bouncePoint:.5*t}),OFFBREAK:d(d({},this.BallTypes.OFFBREAK),{},{bouncePoint:.4375*t}),SLOWER:d(d({},this.BallTypes.SLOWER),{},{bouncePoint:.5625*t})}}},{key:"calculateTrajectory",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"NORMAL",r=this.BallTypes[i],o=r.height(),a=r.speed(),s=r.swing(),c=r.bouncePoint;return{getPosition:function(t){var e,n=-8*a*t,i=700+n,r=c+(10*Math.random()-5);if(i>r){var l=(i-r)/(700-r);e=o*Math.sin(l*Math.PI)}else{var u=(r-i)/200;e=.5*o*Math.sin(u*Math.PI)}var h=Math.sin(2*t)*s*2;return i<-50?null:{x:n+h,y:0,z:Math.max(0,e)}},bouncePoint:c}}},{key:"parabolaHeight",value:function(t,e){return 4*e*(t/200)*(1-t/200)}},{key:"worldToScreen",value:function(t,e,n){var i=this.screenWidth/(this.screenWidth+n);return{x:t*i*(this.screenWidth/800),y:e*i*(this.screenHeight/400)}}}],null&&w(t.prototype,null),e&&w(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function x(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,E(i.key),i)}}function E(t){var e=function(t){if("object"!=O(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O(e)?e:e+""}function k(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(k=function(){return!!t})()}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}function A(t,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A(t,e)}g(P,"gravity",9.81),g(P,"airResistance",.47),g(P,"ballMass",.16),g(P,"ballRadius",.036),g(P,"PITCH_LENGTH",600),g(P,"PITCH_START",150),g(P,"BallTypes",{YORKER:{height:function(){return 15+10*Math.random()},speed:function(){return 14+3*Math.random()},swing:function(){return 1+.4*Math.random()},bouncePoint:550},BOUNCER:{height:function(){return 75+10*Math.random()},speed:function(){return 13+2*Math.random()},swing:function(){return.2+.2*Math.random()},bouncePoint:250},NORMAL:{height:function(){return 45+10*Math.random()},speed:function(){return 12+2*Math.random()},swing:function(){return.6+.4*Math.random()},bouncePoint:400},OFFBREAK:{height:function(){return 40+10*Math.random()},speed:function(){return 10+2*Math.random()},swing:function(){return 1.3+.4*Math.random()},bouncePoint:350},SLOWER:{height:function(){return 30+10*Math.random()},speed:function(){return 8+2*Math.random()},swing:function(){return.3+.2*Math.random()},bouncePoint:450}}),g(P,"screenWidth",800),g(P,"screenHeight",400),g(P,"pixelsPerMeter",50);var T=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=j(e),function(t,e){if(e&&("object"==O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,k()?Reflect.construct(e,n||[],j(t).constructor):e.apply(t,n))}(this,e,[700,200,20,20])).z=0,t.time=0,t.inPlay=!1,t.trajectory=null,t.startX=t.x,t.startY=t.y,t.type="NORMAL",t.hasBounced=!1,t.bounceEffect=null,t.wasHit=!1,t.debug=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(e,t),n=e,i=[{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NORMAL";this.x=680,this.y=260,this.z=70,this.time=0,this.startX=this.x,this.startY=this.y,this.type=e,this.hasBounced=!1,this.bounceEffect=null,this.wasHit=!1;var n=Math.min(t*(.12+.06*Math.random()),10),i=Math.PI+Math.PI/6+(.2*Math.random()-.1),r=.3*Math.random()+.1;this.trajectory=P.calculateTrajectory(n,i,r,e),this.bouncePoint=this.trajectory.bouncePoint,this.inPlay=!0}},{key:"collidesWith",value:function(t){if("Batsman"===t.constructor.name){var e={x:t.x-40,y:t.y-30,width:t.width+80,height:t.height+60},n=this.x>=e.x&&this.x<=e.x+e.width&&this.y>=e.y&&this.y<=e.y+e.height,i=!this.wasHit&&this.x>t.x-50;return n&&i}return"Wickets"===t.constructor.name&&!this.wasHit&&this.z<50&&this.x>=t.x-5&&this.x<=t.x+t.width+5}},{key:"update",value:function(){if(this.inPlay&&this.trajectory){this.time+=.035;var t=this.trajectory.getPosition(this.time);if(!t)return void(this.inPlay=!1);this.x=this.startX+t.x,this.y=this.startY,this.z=t.z,!this.hasBounced&&this.x<=this.trajectory.bouncePoint&&(this.hasBounced=!0,this.bounceEffect={alpha:1,size:1}),this.x<-50&&(this.inPlay=!1)}}},{key:"draw",value:function(t,e){if(this.inPlay){this.bounceEffect&&this.bounceEffect.alpha>0&&(t.save(),t.beginPath(),t.arc(this.bouncePoint,350,5*this.bounceEffect.size,0,2*Math.PI),t.fillStyle="rgba(255,255,255,".concat(this.bounceEffect.alpha,")"),t.fill(),t.restore(),this.bounceEffect.alpha-=.05,this.bounceEffect.size+=.2);var n=Math.max(.2,1-this.z/100);t.beginPath(),t.ellipse(this.x+this.width/2,350,10*n,5*n,0,0,2*Math.PI),t.fillStyle="rgba(0,0,0,".concat(.3*n,")"),t.fill();var i=20+.05*this.z;t.drawImage(e,this.x,this.y-this.z,i,i),t.restore()}}}],i&&x(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}(s);function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function R(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,B(i.key),i)}}function B(t){var e=function(t){if("object"!=M(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==M(e)?e:e+""}function C(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(C=function(){return!!t})()}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}function I(t,e){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},I(t,e)}var W=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=_(e),function(t,e){if(e&&("object"==M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,C()?Reflect.construct(e,n||[],_(t).constructor):e.apply(t,n))}(this,e,[50,275,15,75])).remaining=3,t.stumpWidth=3,t.baleHeight=5,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}(e,t),n=e,(i=[{key:"hit",value:function(){return this.remaining--,this.remaining<=0}},{key:"draw",value:function(t){t.fillStyle="#8B4513",t.fillRect(this.x,this.y,this.stumpWidth,this.height),t.fillRect(this.x+6,this.y,this.stumpWidth,this.height),t.fillRect(this.x+12,this.y,this.stumpWidth,this.height),t.fillStyle="#A0522D",t.fillRect(this.x-1,this.y,this.width+2,this.baleHeight)}}])&&R(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}(s);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function G(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,F(i.key),i)}}function F(t){var e=function(t){if("object"!=L(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==L(e)?e:e+""}var D=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sounds={hit:"data:audio/wav;base64,UklGRl9vT19AAElGRgAAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgA",wicket:"data:audio/wav;base64,UklGRl9vT19AAElGRgAAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgA"}},(e=[{key:"play",value:function(t){new Audio(this.sounds[t]).play().catch((function(){}))}}])&&G(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function N(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,z(i.key),i)}}function z(t){var e=function(t){if("object"!=H(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==H(e)?e:e+""}var U=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.score=0,this.isGameOver=!1,this.scoreElement=document.getElementById("score"),this.wicketsElement=document.getElementById("wickets"),this.gameOverElement=document.getElementById("gameOver"),this.finalScoreElement=document.getElementById("finalScore")},(e=[{key:"updateScore",value:function(t){t>0&&(this.score+=t,this.scoreElement&&(this.scoreElement.textContent="Score: ".concat(this.score)),console.log("Score updated: +".concat(t,", Total: ").concat(this.score)))}},{key:"updateWickets",value:function(t){this.wicketsElement.textContent="Wickets: ".concat(t)}},{key:"setGameOver",value:function(){this.isGameOver=!0,this.gameOverElement.classList.remove("hidden"),this.finalScoreElement.textContent=this.score}},{key:"reset",value:function(){this.score=0,this.isGameOver=!1,this.updateScore(0),this.gameOverElement.classList.add("hidden")}}])&&N(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function Y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,K(i.key),i)}}function K(t){var e=function(t){if("object"!=X(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==X(e)?e:e+""}var Q=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.power=0,this.increasing=!1,this.max=100},(e=[{key:"start",value:function(){this.increasing=!0,this.increasePower()}},{key:"stop",value:function(){this.increasing=!1;var t=this.power;return this.power=0,t}},{key:"increasePower",value:function(){var t=this;this.increasing&&(this.power=(this.power+2)%this.max,requestAnimationFrame((function(){return t.increasePower()})))}},{key:"draw",value:function(t){this.increasing&&(t.fillStyle="#333",t.fillRect(350,350,100,20),t.fillStyle="red",t.fillRect(350,350,this.power,20))}}])&&Y(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);c=!0);}catch(t){l=!0,r=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw r}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return V(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function $(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,J(i.key),i)}}function J(t){var e=function(t){if("object"!=Z(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Z(e)?e:e+""}function tt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tt=function(){return!!t})()}function et(){return et="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=nt(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},et.apply(null,arguments)}function nt(t){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nt(t)}function it(t,e){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},it(t,e)}var rt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=nt(e),function(t,e){if(e&&("object"==Z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,tt()?Reflect.construct(e,n||[],nt(t).constructor):e.apply(t,n))}(this,e,[650,280,50,100])).bowlingFrame=0,t.isBowling=!1,t.ballTypes=Object.keys(P.BallTypes),t.currentBallType="NORMAL",t.releasePoint=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(e,t),n=e,i=[{key:"startBowling",value:function(){this.isBowling=!0,this.bowlingFrame=0,this.releasePoint=Math.floor(15+10*Math.random());for(var t=Math.random(),e=0,n=0,i=Object.entries({NORMAL:.25,YORKER:.2,BOUNCER:.2,OFFBREAK:.2,SLOWER:.15});n<i.length;n++){var r=q(i[n],2),o=r[0];if(t<=(e+=r[1])){this.currentBallType=o;break}}}},{key:"getCurrentBallType",value:function(){return this.currentBallType}},{key:"update",value:function(){if(this.isBowling){if(this.bowlingFrame++,this.bowlingFrame===this.releasePoint)return!0;this.bowlingFrame>30&&(this.isBowling=!1,this.bowlingFrame=0)}return!1}},{key:"draw",value:function(t,n){var i,r,o;t.beginPath(),t.ellipse(this.x+this.width/2,350,this.width/2,10,0,0,2*Math.PI),t.fillStyle="rgba(0,0,0,0.2)",t.fill(),t.save(),this.isBowling&&(t.translate(this.x+25,this.y+50),t.rotate(-this.bowlingFrame/30*Math.PI/2),t.translate(-(this.x+25),-(this.y+50))),(i=e,r=this,"function"==typeof(o=et(nt(1&3?i.prototype:i),"draw",r))?function(t){return o.apply(r,t)}:o)([t,n]),t.restore()}}],i&&$(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}(s);function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function at(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,st(i.key),i)}}function st(t){var e=function(t){if("object"!=ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ot(e)?e:e+""}var ct=function(){return t=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=document.getElementById("gameCanvas"),this.ctx=this.canvas.getContext("2d"),this.setCanvasSize(),window.addEventListener("resize",(function(){return e.handleResize()})),this.spriteManager=new i,this.soundManager=new D,this.gameState=new U,this.powerMeter=new Q,this.initializeGameObjects(),this.loadSprites(),this.setupKeyboardControls(),this.resetGame(),this.boundaryAnimation=null,this.GROUND_Y=350,this.CENTER_X=this.canvas.width/2,this.BATSMAN_X=this.CENTER_X-250,this.BOWLER_X=this.CENTER_X+250,this.WICKETS_X=this.CENTER_X-300,this.debug=!1},e=[{key:"setCanvasSize",value:function(){this.canvas.width=Math.min(1200,window.innerWidth-40),this.canvas.height=Math.min(600,window.innerHeight-120),this.scaleX=this.canvas.width/800,this.scaleY=this.canvas.height/400,this.groundY=.875*this.canvas.height,this.pitchStart=.1875*this.canvas.width,this.pitchEnd=.8125*this.canvas.width}},{key:"handleResize",value:function(){var t=this.canvas.width,e=this.canvas.height;this.setCanvasSize();var n=this.canvas.width/t,i=this.canvas.height/e;this.batsman&&this.batsman.scale(n,i),this.bowler&&this.bowler.scale(n,i),this.wickets&&this.wickets.scale(n,i),Physics.updateScreenDimensions(this.canvas.width,this.canvas.height)}},{key:"loadSprites",value:function(){this.sprites={batsman:this.spriteManager.createBatsmanSprite(),ball:this.spriteManager.createBallSprite(),wickets:this.spriteManager.createWicketsSprite(),bowler:this.spriteManager.createBowlerSprite()},this.startGame()}},{key:"initializeGameObjects",value:function(){this.batsman=new b(this.BATSMAN_X,300),this.bowler=new rt(this.BOWLER_X,300),this.ball=new T,this.wickets=new W(this.WICKETS_X,275)}},{key:"setupKeyboardControls",value:function(){var t=this;window.addEventListener("keydown",(function(e){switch(e.code){case"ArrowUp":t.moveUp=!0;break;case"ArrowDown":t.moveDown=!0;break;case"Space":t.powerMeter.increasing||t.powerMeter.start();break;case"Enter":t.gameState.isGameOver&&t.resetGame()}})),window.addEventListener("keyup",(function(e){switch(e.code){case"ArrowUp":t.moveUp=!1;break;case"ArrowDown":t.moveDown=!1;break;case"Space":if(t.powerMeter.increasing){var n=t.powerMeter.stop();t.hit(n)}}}))}},{key:"resetGame",value:function(){this.gameState.reset(),this.wickets.remaining=3,this.gameState.updateWickets(this.wickets.remaining),this.updateScore(),document.getElementById("gameOver").classList.add("hidden")}},{key:"startGame",value:function(){this.gameLoop()}},{key:"gameLoop",value:function(){var t=this;this.update(),this.draw(),requestAnimationFrame((function(){return t.gameLoop()}))}},{key:"update",value:function(){if((this.moveUp||this.moveDown)&&this.batsman.move(this.moveUp?-1:1,this.canvas.height),this.bowler.update()&&!this.ball.inPlay){var t=this.bowler.getCurrentBallType();this.ball.reset(50,t)}this.ball&&this.ball.inPlay&&(this.ball.update(),this.ball.collidesWith(this.batsman)?this.handleHit():!this.ball.wasHit&&this.ball.collidesWith(this.wickets)&&this.handleWicketHit(),this.ball.x<50&&(this.ball.inPlay=!1))}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawGround(),this.wickets.draw(this.ctx),this.drawWithShadow(this.batsman,this.sprites.batsman),this.drawWithShadow(this.bowler,this.sprites.bowler),this.ball.inPlay&&this.ball.draw(this.ctx,this.sprites.ball),this.powerMeter.draw(this.ctx),this.boundaryAnimation&&(this.ctx.save(),this.ctx.globalAlpha=this.boundaryAnimation.alpha,this.ctx.font="".concat(48*this.boundaryAnimation.scale,"px Arial"),this.ctx.fillStyle="red",this.ctx.textAlign="center",this.ctx.fillText(this.boundaryAnimation.text,400,200),this.ctx.restore(),this.boundaryAnimation.alpha-=.02,this.boundaryAnimation.scale+=.05,this.boundaryAnimation.alpha<=0&&(this.boundaryAnimation=null)),this.batsman.currentShot&&(this.ctx.font="20px Arial",this.ctx.fillStyle="black",this.ctx.fillText("Shot: ".concat(this.batsman.currentShot),20,30)),this.ball.inPlay&&(this.ctx.font="16px Arial",this.ctx.fillStyle="black",this.ctx.fillText("Ball Type: ".concat(this.ball.type),20,50))}},{key:"drawGround",value:function(){this.ctx.fillStyle="#87CEEB",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.moveTo(0,this.GROUND_Y),this.ctx.lineTo(this.canvas.width,this.GROUND_Y),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.closePath();var t=this.ctx.createLinearGradient(0,this.groundY,0,this.canvas.height);t.addColorStop(0,"#90EE90"),t.addColorStop(1,"#228B22"),this.ctx.fillStyle=t,this.ctx.fill(),this.ctx.strokeStyle="#fff",this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.moveTo(this.pitchStart,this.groundY),this.ctx.lineTo(this.pitchStart,this.canvas.height),this.ctx.moveTo(this.pitchEnd,this.groundY),this.ctx.lineTo(this.pitchEnd,this.canvas.height),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.pitchStart,this.groundY),this.ctx.lineTo(this.pitchEnd,this.groundY),this.ctx.lineTo(this.pitchEnd,this.canvas.height),this.ctx.lineTo(this.pitchStart,this.canvas.height),this.ctx.closePath(),this.ctx.fillStyle="#c2b280",this.ctx.fill()}},{key:"drawWithShadow",value:function(t,e){this.ctx.beginPath(),this.ctx.ellipse(t.x+t.width/2,this.GROUND_Y,t.width/2,t.width/4,0,0,2*Math.PI),this.ctx.fillStyle="rgba(0,0,0,0.3)",this.ctx.fill(),t.draw(this.ctx,e)}},{key:"hit",value:function(t){this.ball.inPlay||(this.bowler.startBowling(),t&&this.ball.reset(t))}},{key:"calculateTiming",value:function(){if(!this.ball||!this.ball.inPlay)return 0;var t=this.batsman.x+this.batsman.width/2,e=Math.abs(this.ball.x-t);return e<40?1:e<60?.8:e<80?.5:.2}},{key:"calculateScore",value:function(t,e){var n=t*e/30,i=.8+.4*Math.random(),r=Math.floor(n*i);return e>=.8&&t>=70?Math.random()<.7?6:4:e>=.6&&t>=50?Math.random()<.6?4:Math.min(3,r):e>=.4?Math.min(3,Math.max(1,r)):Math.random()<.3?1:0}},{key:"handleHit",value:function(){var t=this.powerMeter.power||50,e=this.calculateTiming();console.log("Hit attempt:",{power:t,timing:e});var n=this.batsman.playShot(t),i=this.calculateScore(t,e);console.log("Shot result:",{shotType:n,points:i,power:t,timing:e,randomFactor:Math.random()}),i>0&&(this.gameState.updateScore(i),i>=4&&(this.boundaryAnimation={text:6===i?"SIX!":"FOUR!",alpha:1,scale:1}),this.soundManager.play("hit")),this.ball.inPlay=!1,this.ball.wasHit=!0}},{key:"handleWicketHit",value:function(){this.wickets.hit()&&this.gameState.setGameOver(),this.gameState.updateWickets(this.wickets.remaining),this.ball.inPlay=!1,this.soundManager.play("wicket")}},{key:"updateScore",value:function(){document.getElementById("score").textContent="Score: ".concat(this.gameState.score)}},{key:"updateWickets",value:function(){document.getElementById("wickets").textContent="Wickets: ".concat(this.gameState.wicketsLeft)}},{key:"gameOver",value:function(){document.getElementById("gameOver").classList.remove("hidden"),document.getElementById("finalScore").textContent=this.gameState.score}}],e&&at(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();window.onload=function(){new ct}})();